{"ast":null,"code":"import _slicedToArray from\"/home/nicco/Development/code/phase4/travela/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{NavLink,useNavigate}from\"react-router-dom\";import\"../css/LoginSignup.css\";// {setUser} pass as prop to login function\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var setUser=_ref.setUser;var navigate=useNavigate();// add this to app together with login resource\n// const [user, setUser] = useState(\"\")\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];function submitHandler(e){e.preventDefault();fetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(res){if(res.ok){res.json().then(function(user){console.log(user);localStorage.setItem(\"jwt\",user.jwt);localStorage.setItem(\"passenger\",\"\".concat(user.passenger.id));setUser(user);navigate(\"/dashboard\");});}else{console.log(res.json().then(function(error){return setError(error);}));}});}return/*#__PURE__*/_jsxs(\"div\",{className:\"form-inner\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Travela Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",required:\"required\",id:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",required:\"required\",id:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"})]}),error?/*#__PURE__*/_jsx(\"p\",{children:error.errors}):null,/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup_link\",children:[\"Not a member?\",/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",children:\"Signup\"})]})]})]});}export default Login;","map":{"version":3,"names":["React","useState","NavLink","useNavigate","Login","setUser","navigate","error","setError","email","setEmail","password","setPassword","submitHandler","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","ok","json","user","console","log","localStorage","setItem","jwt","passenger","id","target","value","errors"],"sources":["/home/nicco/Development/code/phase4/travela/src/App/components/Login/index.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { NavLink,useNavigate} from \"react-router-dom\"\nimport \"../css/LoginSignup.css\";\n\n\n// {setUser} pass as prop to login function\n\nfunction Login({setUser}) {\nconst navigate = useNavigate()\n    // add this to app together with login resource\n    // const [user, setUser] = useState(\"\")\n    const [error, setError] = useState({})\n    \n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n\n    function submitHandler(e){\n        e.preventDefault();\n        fetch(\"/login\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({ email, password }),\n        }).then((res) => {\n            if (res.ok) {\n                res.json().then((user) => {\n                    console.log(user)\n                    localStorage.setItem(\"jwt\", user.jwt);\n                    localStorage.setItem(\"passenger\", `${user.passenger.id}`);\n                    setUser(user)\n                navigate(\"/dashboard\")\n                });\n            } else {\n                console.log(res.json().then(error=>setError(error)))\n            }\n        })\n    }\n\n    return (\n        <div className='form-inner'>\n            <h1>Travela Login</h1> \n\n            <form onSubmit={submitHandler}>      \n                <div className='form-group'>\n                    <input \n                        type=\"email\" \n                        name=\"email\" \n                        required=\"required\"\n                        id=\"email\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                    />\n                    <span></span>\n                    <label>Email</label>\n                </div>\n\n                <div className='form-group'>\n                    <input \n                        type=\"password\" \n                        name=\"password\" \n                        required=\"required\"\n                        id=\"password\" \n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                    />\n                    <span></span>\n                    <label>Password</label>\n\n                </div>\n                    { error ? <p>{error.errors}</p>:null}\n                    <input type=\"submit\" value=\"Login\" />\n                \n                <div className=\"signup_link\">\n                    Not a member?\n                    <NavLink to=\"/signup\">Signup</NavLink>\n                </div>\n            </form>\n           \n        </div>\n    )\n}\n\nexport default Login"],"mappings":"iIAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,OAAO,CAACC,WAAW,KAAO,kBAAkB,CACrD,MAAO,wBAAwB,CAG/B;AAAA,wFAEA,QAASC,MAAK,MAAY,IAAVC,QAAO,MAAPA,OAAO,CACvB,GAAMC,SAAQ,CAAGH,WAAW,EAAE,CAC1B;AACA;AACA,cAA0BF,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA/BM,KAAK,eAAEC,QAAQ,eAEtB,eAA0BP,QAAQ,CAAC,EAAE,CAAC,yCAA/BQ,KAAK,eAAEC,QAAQ,eACtB,eAAgCT,QAAQ,CAAC,EAAE,CAAC,yCAArCU,QAAQ,eAAEC,WAAW,eAG5B,QAASC,cAAa,CAACC,CAAC,CAAC,CACrBA,CAAC,CAACC,cAAc,EAAE,CAClBC,KAAK,CAAC,QAAQ,CAAE,CACZC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEZ,KAAK,CAALA,KAAK,CAAEE,QAAQ,CAARA,QAAS,CAAC,CAC5C,CAAC,CAAC,CAACW,IAAI,CAAC,SAACC,GAAG,CAAK,CACb,GAAIA,GAAG,CAACC,EAAE,CAAE,CACRD,GAAG,CAACE,IAAI,EAAE,CAACH,IAAI,CAAC,SAACI,IAAI,CAAK,CACtBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC,CACjBG,YAAY,CAACC,OAAO,CAAC,KAAK,CAAEJ,IAAI,CAACK,GAAG,CAAC,CACrCF,YAAY,CAACC,OAAO,CAAC,WAAW,WAAKJ,IAAI,CAACM,SAAS,CAACC,EAAE,EAAG,CACzD5B,OAAO,CAACqB,IAAI,CAAC,CACjBpB,QAAQ,CAAC,YAAY,CAAC,CACtB,CAAC,CAAC,CACN,CAAC,IAAM,CACHqB,OAAO,CAACC,GAAG,CAACL,GAAG,CAACE,IAAI,EAAE,CAACH,IAAI,CAAC,SAAAf,KAAK,QAAEC,SAAQ,CAACD,KAAK,CAAC,GAAC,CAAC,CACxD,CACJ,CAAC,CAAC,CACN,CAEA,mBACI,aAAK,SAAS,CAAC,YAAY,wBACvB,qCAAsB,cAEtB,cAAM,QAAQ,CAAEM,aAAc,wBAC1B,aAAK,SAAS,CAAC,YAAY,wBACvB,cACI,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,OAAO,CACZ,QAAQ,CAAC,UAAU,CACnB,EAAE,CAAC,OAAO,CACV,KAAK,CAAEJ,KAAM,CACb,QAAQ,CAAE,kBAACK,CAAC,QAAKJ,SAAQ,CAACI,CAAC,CAACoB,MAAM,CAACC,KAAK,CAAC,EAAC,EAC5C,cACF,eAAa,cACb,gCAAoB,GAClB,cAEN,aAAK,SAAS,CAAC,YAAY,wBACvB,cACI,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,CACf,QAAQ,CAAC,UAAU,CACnB,EAAE,CAAC,UAAU,CACb,KAAK,CAAExB,QAAS,CAChB,QAAQ,CAAE,kBAACG,CAAC,QAAKF,YAAW,CAACE,CAAC,CAACoB,MAAM,CAACC,KAAK,CAAC,EAAC,EAC/C,cACF,eAAa,cACb,mCAAuB,GAErB,CACA5B,KAAK,cAAG,mBAAIA,KAAK,CAAC6B,MAAM,EAAK,CAAC,IAAI,cACpC,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAG,cAEzC,aAAK,SAAS,CAAC,aAAa,wCAExB,KAAC,OAAO,EAAC,EAAE,CAAC,SAAS,oBAAiB,GACpC,GACH,GAEL,CAEd,CAEA,cAAehC,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}