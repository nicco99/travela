{"ast":null,"code":"import _defineProperty from\"/home/nicco/Development/code/phase4/travela/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/nicco/Development/code/phase4/travela/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/nicco/Development/code/phase4/travela/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),passengers=_useState2[0],setPassengers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],setUpdate=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),newDetails=_useState6[0],setNewDetails=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),change=_useState8[0],setChange=_useState8[1];var token=localStorage.getItem(\"jwt\");var id=localStorage.getItem(\"passenger\");var navigate=useNavigate();useEffect(function(){fetch(\"/passengers/\".concat(parseInt(id)),{method:\"GET\",headers:{\"content-type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(function(res){return res.json();}).then(function(res){console.log(res);setPassengers(res);});},[change]);function handleUpdate(){setUpdate(true);}function handleChange(e){var name=e.target.name;var value=e.target.value;setNewDetails(_objectSpread(_objectSpread({},newDetails),{},_defineProperty({},name,value)));}function handleDelete(){fetch(\"/passengers/\".concat(parseInt(id)),{method:\"DELETE\",headers:{\"content-type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(function(r){return r.json();}).then(function(data){setChange(!change);localStorage.clear();navigate(\"/login\");});}function handleSave(){fetch(\"/passengers/\".concat(parseInt(id)),{method:\"PATCH\",headers:{\"content-type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify(newDetails)}).then(function(r){return r.json();}).then(function(data){console.log(data);setChange(!change);setUpdate(!update);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-4/5 flex flex-col justify-center items-center\",children:[update?/*#__PURE__*/_jsxs(\"div\",{className:\"fixed w-full sm:w-1/2 bg-sky-100 rounded h-1/2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4/5 h-1/4 text-center font-mono text-2xl p-3\",children:\"Update your details here\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handleChange(e);},className:\"border rounded-md w-3/5 p-2\",name:\"username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handleChange(e);},className:\"border rounded-md p-2 w-3/5\",name:\"email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handleChange(e);},className:\"border rounded-md p-2 w-3/5\",name:\"p_number\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row justify-evenly items-center mb-8 p-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"px-4 outline rounded-sm text-blue-600 hover:bg-blue-600 hover:text-white\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setUpdate(!update);},className:\"px-4 outline rounded-sm text-red-600 hover:bg-red-600 hover:text-white\",children:\"Discard\"})]})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"sm:w-4/5 text-2xl flex justify-center\",children:[\"Welcome \",passengers.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-4/5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"flex flex-col w-full\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{// onChange={(e)=>handleChange(e)}\nclassName:\"border rounded-md w-full p-2\",value:passengers.username})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"flex flex-col w-1/2\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded-md p-2 w-full\",value:passengers.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"flex flex-col w-full\",children:\"phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded-md p-2 w-full\",value:passengers.p_number})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex-col p-2  flex sm:flex-row sm:justify-evenly mt-5\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{onClick:handleUpdate,className:\" outline text-blue-500 hover:bg-blue-400 p-3 ease-in-out text-2xl hover:text-white rounded-md w-24\",children:\"Update\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleDelete();},className:\"outline hover:bg-red-500 p-3 ease-in-out text-2xl hover:text-white text-red-500 rounded-md \",children:\"Delete Account\"}),/*#__PURE__*/_jsx(\"div\",{className:\"outline  text-blue-800 p-3 rounded-sm hover:bg-blue-800 hover:text-white\",children:\"View Current Booking\"})]})]});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Profile","passengers","setPassengers","update","setUpdate","newDetails","setNewDetails","change","setChange","token","localStorage","getItem","id","navigate","fetch","parseInt","method","headers","Authorization","then","res","json","console","log","handleUpdate","handleChange","e","name","target","value","handleDelete","r","data","clear","handleSave","body","JSON","stringify","username","email","p_number"],"sources":["/home/nicco/Development/code/phase4/travela/src/App/components/Dashboard/Profile/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n\nfunction Profile() {\n  const [passengers, setPassengers] = useState({});\n  const [update,setUpdate] = useState(false)\n  const [newDetails,setNewDetails] = useState({})\n  const [change,setChange] = useState(false)\n  const token = localStorage.getItem(\"jwt\");\n  const id = localStorage.getItem(\"passenger\");\n  const navigate = useNavigate()\n  useEffect(() => {\n    fetch(`/passengers/${parseInt(id)}`, {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        console.log(res);\n        setPassengers(res);\n      });\n  }, [change]);\n\n  function handleUpdate(){\n   setUpdate(true)\n  }\n\nfunction handleChange(e){\n  let name = e.target.name\n  let value = e.target.value\n  setNewDetails({...newDetails, [name]:value})\n \n}\n\nfunction handleDelete () {\n  fetch(`/passengers/${parseInt(id)}`, {\n    method: \"DELETE\",\n    headers: {\n      \"content-type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n}).then(r=>r.json()).then(data => {\n  setChange(!change)\n  localStorage.clear()\n  navigate(\"/login\")\n})\n}\n\nfunction handleSave(){\n  fetch(`/passengers/${parseInt(id)}`, {\n    method: \"PATCH\",\n    headers: {\n      \"content-type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify(newDetails)\n}).then(r=>r.json()).then(data=>{ \n  console.log(data)\n  setChange(!change)\n  setUpdate(!update)\n})\n}\n\n  return (\n    <div className=\"w-full h-4/5 flex flex-col justify-center items-center\">\n      {update?<div className=\"fixed w-full sm:w-1/2 bg-sky-100 rounded h-1/2\">\n        <div className=\"w-4/5 h-1/4 text-center font-mono text-2xl p-3\">Update your details here</div>\n      <div className=\"flex flex-col justify-center items-center\">\n          <label>Username:</label>\n          <input\n          onChange={(e)=>handleChange(e)}\n            className=\"border rounded-md w-3/5 p-2\"\n            name=\"username\"\n        \n          />\n        </div>\n        <div className=\"flex flex-col justify-center items-center\">\n          <label>Email:</label>\n          <input\n            onChange={(e)=>handleChange(e)}\n            className=\"border rounded-md p-2 w-3/5\"\n            name=\"email\"\n          />\n        </div>\n        <div className=\"flex flex-col justify-center items-center\">\n       \n          <label>phone Number:</label>\n          <input\n           onChange={(e)=>handleChange(e)}\n            className=\"border rounded-md p-2 w-3/5\"\n            name=\"p_number\"\n          />\n        </div>\n        <div className=\"flex flex-row justify-evenly items-center mb-8 p-3\">\n          <button onClick={handleSave} className=\"px-4 outline rounded-sm text-blue-600 hover:bg-blue-600 hover:text-white\">Save</button>\n          <button onClick={() => setUpdate(!update)}  className=\"px-4 outline rounded-sm text-red-600 hover:bg-red-600 hover:text-white\">Discard</button>\n        </div>\n      </div>:null}\n      <div className=\"sm:w-4/5 text-2xl flex justify-center\">\n        Welcome {passengers.username}\n      </div>\n      <div className=\"w-4/5\">\n        <div>\n          <label className=\"flex flex-col w-full\">Username:</label>\n          <input\n          // onChange={(e)=>handleChange(e)}\n            className=\"border rounded-md w-full p-2\"\n            value={passengers.username}\n          />\n        </div>\n        <div>\n          <label className=\"flex flex-col w-1/2\">Email:</label>\n          <input\n            className=\"border rounded-md p-2 w-full\"\n            value={passengers.email}\n          />\n        </div>\n        <div>\n          <label className=\"flex flex-col w-full\">phone Number:</label>\n          <input\n            className=\"border rounded-md p-2 w-full\"\n            value={passengers.p_number}\n          />\n        </div>\n      </div>\n      <div className=\"w-full flex-col p-2  flex sm:flex-row sm:justify-evenly mt-5\">\n        {\" \"}\n        <div onClick={handleUpdate} className=\" outline text-blue-500 hover:bg-blue-400 p-3 ease-in-out text-2xl hover:text-white rounded-md w-24\">\n          Update\n        </div>\n        <div onClick={()=>handleDelete()} className=\"outline hover:bg-red-500 p-3 ease-in-out text-2xl hover:text-white text-red-500 rounded-md \">\n          Delete Account\n        </div>\n        <div className=\"outline  text-blue-800 p-3 rounded-sm hover:bg-blue-800 hover:text-white\">\n          View Current Booking\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}