{"ast":null,"code":"import _defineProperty from\"/home/nicco/Development/code/phase4/travela/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/nicco/Development/code/phase4/travela/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/nicco/Development/code/phase4/travela/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import Rating from\"./Rating\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SingleBooking(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),ratingValue=_useState4[0],setRatingValue=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],setFormData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),review=_useState8[0],setReview=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),notify=_useState10[0],setNotify=_useState10[1];var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var token=localStorage.getItem(\"jwt\");var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),alert=_useState12[0],setAlert=_useState12[1];useEffect(function(){setTimeout(function(){setAlert(false);},3000);},[]);function handleChange(e){var name=e.target.name;var value=e.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));}useEffect(function(){fetch(\"/reviews\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(token),\"content-type\":\"application/json\"}}).then(function(res){return res.json().then(function(data){return setReview(data);});});},[]);function handleReviews(){console.log(review);}function handleReview(e){e.preventDefault();var reviews={comment:formData.comment,rating:ratingValue,booking_id:parseInt(id)};fetch(\"/reviews\",{method:\"POST\",headers:{Authorization:\"Bearer \".concat(token),\"content-type\":\"application/json\"},body:JSON.stringify(reviews)}).then(function(res){return res.json();}).then(function(data){setNotify(function(notify){return!notify;});navigate(-1+1);});}var styling=\"h-28 bg-blue-400 text-white rounded-md shadow-lg flex flex-col justify-around items-center mt-3\";return/*#__PURE__*/_jsxs(\"div\",{className:\"h-4/5 bg-sky-100 rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-28 grid-cols-1\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"bg-sky-50  p-4 text-center text-3xl\",children:\"Welcome Client\\uD83D\\uDE0A\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid sm:grid-cols-3 md:grid-cols-2 lg:grid-cols-3 gap-2 m-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styling),children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-2xl\",children:\"Amount paid for the trip\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-serif font-extrabold text-4xl\",children:\"2000\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styling),children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-2xl\",children:\"Depature time\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-serif font-extrabold text-4xl\",children:\"10:00am\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styling),children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-sky-900 px-4 text-white active:bg-blue-500 font-bold h-8 rounded hover:bg-white hover:text-black shadow hover:shadow-lg outline-none focus:outline-none \",type:\"button\",onClick:function onClick(){return setShowModal(true);},children:\"Leave a review\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styling),children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-sky-900 px-4 text-white active:bg-blue-500 font-bold h-8 rounded hover:bg-white hover:outline-sky-900 hover:text-black shadow-xl outline-none focus:outline-none \",type:\"button\",onClick:handleReviews,children:\"view my reviews\"})})]}),showModal?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-auto my-6 mx-auto max-w-3xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between p-5 border-b border-solid border-gray-300 rounded-t \",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font=semibold\",children:\"Rate our trip and bus\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-transparent border-0 text-black float-center\",onClick:function onClick(){return setShowModal(false);},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-black opacity-7 h-6 w-6 text-xl block bg-gray-400 py-0 rounded-full\",children:\"x\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative p-6 flex-auto\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleReview(e);},className:\"bg-blue-400 shadow-md rounded px-8 pt-6 pb-8 w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-black text-sm font-bold mb-1\",children:\"comment\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handleChange(e);},className:\"shadow appearance-none border rounded w-full py-2 px-1 text-black\",name:\"comment\",required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-black text-sm font-bold mb-1\",children:\"rating out of 5\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Rating,{ratingValue:ratingValue,setRatingValue:setRatingValue})}),/*#__PURE__*/_jsx(\"button\",{className:\"font-bold text-white px-6 py-3 mt-3 rounded shadow hover:shadow-lg bg-blue-900\",type:\"submit\",children:\"submit\"})]})})]})})}):null]});}export default SingleBooking;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Rating","SingleBooking","showModal","setShowModal","ratingValue","setRatingValue","formData","setFormData","review","setReview","notify","setNotify","navigate","id","token","localStorage","getItem","alert","setAlert","setTimeout","handleChange","e","name","target","value","fetch","method","headers","Authorization","then","res","json","data","handleReviews","console","log","handleReview","preventDefault","reviews","comment","rating","booking_id","parseInt","body","JSON","stringify","styling"],"sources":["/home/nicco/Development/code/phase4/travela/src/App/components/Dashboard/Bookings/SingleBooking/index.jsx"],"sourcesContent":["import React,{useState} from 'react'\nimport { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom'\nimport Rating from \"./Rating\"\nfunction SingleBooking() {\n  const [showModal, setShowModal] = useState(false);\n  const [ratingValue, setRatingValue] = useState(0);\n  const [formData, setFormData] = useState({});\n  const [review, setReview] = useState([])\n  const [notify,setNotify]= useState(false)\n  const navigate = useNavigate()\n  const {id} = useParams()\n  const token = localStorage.getItem(\"jwt\");\n\n\n\n  \n  const [alert, setAlert] = useState(true);\n      \n  useEffect(() => {\n    setTimeout(() => {\n      setAlert(false);\n    }, 3000);\n  }, []);     \n    \n\n\n\n \n  function handleChange(e) {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  }\n\n  useEffect(()=>{\n    fetch(\"/reviews\",{\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"content-type\": \"application/json\",\n      }\n    })\n    .then(res=>res.json().then(data=>setReview(data)))\n  \n  },[])\n\nfunction handleReviews() {\nconsole.log(review)\n}\n\n\n\n\n\n  function handleReview(e) {\n    e.preventDefault();\n    const reviews = {\n      comment: formData.comment,\n      rating: ratingValue,\n      booking_id: parseInt(id)\n    };\n    fetch(\"/reviews\", {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify(reviews),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setNotify(notify=>!notify)\n        navigate(-1 + 1);\n      });\n  }\n  const styling = \"h-28 bg-blue-400 text-white rounded-md shadow-lg flex flex-col justify-around items-center mt-3\"\n  return (\n    <div className='h-4/5 bg-sky-100 rounded shadow-md'>\n      <div className='grid grid-'>\n\n      </div>\n      <div className='h-28 grid-cols-1'>\n        <h1 className='bg-sky-50  p-4 text-center text-3xl'>Welcome ClientðŸ˜Š</h1>\n      </div>\n      <div className='grid sm:grid-cols-3 md:grid-cols-2 lg:grid-cols-3 gap-2 m-4'>\n        <div className={`${styling}`}>\n          <h1 className='font-2xl'>Amount paid for the trip</h1>\n          <span className='font-serif font-extrabold text-4xl'>2000</span>\n        </div>\n        <div className={`${styling}`}>\n          <p className='font-2xl' >Depature time</p>\n          <span className='font-serif font-extrabold text-4xl'>10:00am</span>\n        </div>\n        <div className={`${styling}`}>   \n          <button\n            className=\"bg-sky-900 px-4 text-white active:bg-blue-500 font-bold h-8 rounded hover:bg-white hover:text-black shadow hover:shadow-lg outline-none focus:outline-none \"\n            type=\"button\"\n            onClick={() => setShowModal(true)}>\n            Leave a review\n          </button>\n          </div>\n          <div className={`${styling}`}>   \n          <button\n            className=\"bg-sky-900 px-4 text-white active:bg-blue-500 font-bold h-8 rounded hover:bg-white hover:outline-sky-900 hover:text-black shadow-xl outline-none focus:outline-none \"\n            type=\"button\"\n            onClick={handleReviews}>\n             view my reviews\n          </button>\n          </div>\n      </div>\n    \n       {showModal ? (\n            <div className=\"flex justify-center items-center overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n              <div className=\"relative w-auto my-6 mx-auto max-w-3xl\">\n                <div className=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\n                  <div className=\"flex items-start justify-between p-5 border-b border-solid border-gray-300 rounded-t \">\n                    <h3 className=\"text-3xl font=semibold\">\n                      Rate our trip and bus\n                    </h3>\n                    <button\n                      className=\"bg-transparent border-0 text-black float-center\"\n                      onClick={() => setShowModal(false)}>\n                      <span className=\"text-black opacity-7 h-6 w-6 text-xl block bg-gray-400 py-0 rounded-full\">\n                        x\n                      </span>\n                    </button>\n                  </div>\n                  <div className=\"relative p-6 flex-auto\">\n                    <form\n                      onSubmit={(e) => handleReview(e)}\n                      className=\"bg-blue-400 shadow-md rounded px-8 pt-6 pb-8 w-full\">\n                      <label className=\"block text-black text-sm font-bold mb-1\">\n                        comment\n                      </label>\n                      <input\n                        onChange={(e) => handleChange(e)}\n                        className=\"shadow appearance-none border rounded w-full py-2 px-1 text-black\"\n                        name=\"comment\"\n                        required\n                      />\n                      <label className=\"block text-black text-sm font-bold mb-1\">\n                        rating out of 5\n                      </label>\n                      <div>\n                      <Rating\n                        ratingValue={ratingValue}\n                        setRatingValue={setRatingValue}\n                      />\n                      </div>\n                     \n                      <button\n                        className=\"font-bold text-white px-6 py-3 mt-3 rounded shadow hover:shadow-lg bg-blue-900\"\n                        type=\"submit\">\n                        submit\n                      </button>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : null}\n      \n    </div>\n  )\n}\n\nexport default SingleBooking"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}